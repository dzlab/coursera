# Chapter 2 Building and Operationalizing Storage Systems

## Review Questions
You can find the answers in the appendix.

**1.** A database administrator (DBA) who is new to Google Cloud has asked for your help con- figuring network access to a Cloud SQL PostgreSQL database. The DBA wants to ensure that traffic is encrypted while minimizing administrative tasks, such as managing SQL cer- tificates. What would you recommend?
- [ ] A. Use the TLS protocol
- [x] B. Use Cloud SQL Proxy
- [ ] C. Use a private IP address
- [ ] D. Configure the database instance to use auto-encryption

**2.** You created a Cloud SQL database that uses replication to improve read performance. Occasionally, the read replica will be unavailable. You haven’t noticed a pattern, but the disruptions occur once or twice a month. No DBA operations are occurring when the inci- dents occur. What might be the cause of this issue?
- [ ] A. The read replica is being promoted to a standalone Cloud SQL instance.
- [x] B. Maintenance is occurring on the read replica.
- [ ] C. A backup is being performed on the read replica.
- [ ] D. The primary Cloud SQL instance is failing over to the read replica.

**3.** Your department is experimenting with using Cloud Spanner for a globally accessible data- base. You are starting with a pilot project using a regional instance. You would like to fol- low Google’s recommendations for the maximum sustained CPU utilization of a regional instance. What is the maximum CPU utilization that you would target?
- [ ] A. 50%
- [ ] B. 65%
- [x] C. 75%
- [ ] D. 45%

**4.** A Cloud Spanner database is being deployed in us-west1 and will have to store up to 20 TB of data. What is the minimum number of nodes required?
- [x] A. 10
- [ ] B. 20
- [ ] C. 5
- [ ] D. 40

**5.** A software-as-a-service (SaaS) company specializing in automobile IoT sensors collects streaming time-series data from tens of thousands of vehicles. The vehicles are owned and operated by 40 different companies, who are the primary customers of the SaaS company. The data will be stored in Bigtable using a multitenant database; that is, all customer data will be stored in the same database. The data sent from the IoT device includes a sensor ID, which is globally unique; a timestamp; and several metrics about engine efficiency. Each cus- tomer will query their own data only. Which of the following would you use as a row-key?
- [ ] A. Customer ID, timestamp, sensor ID
- [x] B. Customer ID, sensor ID, timestamp
- [ ] C. Sensor ID, timestamp, customer ID
- [ ] D. Sensor ID, customer ID, timestamp

**6.** A team of game developers is using Cloud Firestore to store player data, including character description, character state, and possessions. Descriptions are up to a 60-character alpha- numeric string that is set when the character is created and not updated. Character state includes health score, active time, and passive time. When they are updated, they are all updated at the same time. Possessions are updated whenever the character acquires or loses a possession. Possessions may be complex objects, such as bags of items, where each item may be a simple object or another complex object. Simple objects are described with a char- acter string. Complex objects have multiple properties. How would you model player data in Cloud Firestore?
- [ ] A. Store description and character state as strings and possessions as entities
- [ ] B. Store description, character state, and possessions as strings
- [ ] C. Store description, character state, and possessions as entities
- [x] D. Store description as a string; character state as an entity with properties for health score, active time, and passive time; and possessions as an entity that may have embedded entities

**7.** You are querying a Cloud Firestore collection of order entities searching for all orders that were created today and have a total sales amount of greater than $100. You have not excluded any indexes, and you have not created any additional indexes using index.yaml. What do you expect the results to be?
- [ ] A. A set of all orders created today with a total sales amount greater than $100
- [ ] B. A set of orders created today and any total sales amount
- [ ] C. A set of with total sales amount greater than $100 and any sales date
- [x] D. No entities returned

**8.** You are running a Redis cache using Cloud Memorystore. One day, you receive an alert notification that the memory usage is exceeding 80 percent. You do not want to scale up the instance, but you need to reduce the amount of memory used. What could you try?
- [x] A. Setting shorter TTLs and trying a different eviction policy.
- [ ] B. Switching from Basic Tier to Standard Tier.
- [ ] C. Exporting the cache.
- [ ] D. There is no other option—you must scale the instance.

**9.** A team of machine learning engineers are creating a repository of data for training and testing machine learning models. All of the engineers work in the same city, and they all contribute datasets to the repository. The data files will be accessed frequently, usually at least once a week. The data scientists want to minimize their storage costs. They plan to use Cloud Storage; what storage class would you recommend?
- [x] A. Regional
- [ ] B. Multi-regional
- [ ] C. Nearline
- [ ] D. Coldline

**10.** Auditors have informed your company CFO that to comply with a new regulation, your company will need to ensure that financial reporting data is kept for at least three years. The CFO asks for your advice on how to comply with the regulation with the least adminis- trative overhead. What would you recommend?
- [x] A. Store the data on Coldline storage
- [ ] B. Store the data on multi-regional storage
- [ ] C. Define a data retention policy
- [ ] D. Define a lifecycle policy

**11.** As a database administrator tasked with migrating a MongoDB instance to Google Cloud, you are concerned about your ability to configure the database optimally. You want to col- lect metrics at both the instance level and the database server level. What would you do in addition to creating an instance and installing and configuring MongoDB to ensure that you can monitor key instances and database metrics?
- [ ] A. Install Stackdriver Logging agent.
- [x] B. Install Stackdriver Monitoring agent.
- [ ] C. Install Stackdriver Debug agent.
- [ ] D. Nothing. By default, the database instance will send metrics to Stackdriver.

**12.** A group of data scientists have uploaded multiple time-series datasets to BigQuery over the last year. They have noticed that their queries—which select up to six columns, apply four SQL functions, and group by the day of a timestamp—are taking longer to run and are incurring higher BigQuery costs as they add data. They do not understand why this is the case since they typically work only with the most recent set of data loaded. What would you recommend they consider in order to reduce query latency and query costs?
- [ ] A. Sort the data by time order before loading
- [ ] B. Stop using Legacy SQL and use Standard SQL dialect
- [x] C. Partition the table and use clustering
- [ ] D. Add more columns to the SELECT statement to use data fetched by BigQuery more effi- ciently

**13.** You are querying a BigQuery table that has been partitioned by time. You create a query and use the --dry_run flag with the bq query command. The amount of data scanned is far more than you expected. What is a possible cause of this?
- [x] A. You did not include _PARTITIONTIME in the WHERE clause to limit the amount of data that needs to be scanned.
- [ ] B. You used CSV instead of AVRO file format when loading the data.
- [ ] C. Both active and long-term data are included in the query results.
- [ ] D. You used JSON instead of the Parquet file format when loading the data.

**14.** Your department is planning to expand the use of BigQuery. The CFO has asked you to investigate whether the company should invest in flat-rate billing for BigQuery. What tools and data would you use to help answer that question?
- [ ] A. Stackdriver Logging and audit log data
- [ ] B. Stackdriver Logging and CPU utilization metrics
- [x] C. Stackdriver Monitoring and CPU utilization metrics
- [ ] D. Stackdriver Monitoring and slot utilization metrics

**15.** You are migrating several terabytes of historical sensor data to Google Cloud Storage. The data is organized into files with one file per sensor per day. The files are named with
the date followed by the sensor ID. After loading 10 percent of the data, you realize that the data loads are not proceeding as fast as expected. What might be the cause?
- [x] A. The filenaming convention uses dates as the first part of the file name. If the files are loaded in this order, they may be creating hotspots when writing the data to Cloud Storage.
- [ ] B. The data is in text instead of Avro or Parquet format.
- [ ] C. You are using a gcloud command-line utility instead of the REST API.
- [ ] D. The data is being written to regional instead of multi-regional storage.
